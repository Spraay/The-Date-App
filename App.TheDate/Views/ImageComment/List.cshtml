@model App.Model.View.BigImageCommentModel

@{
    ViewData["Title"] = "Image Comments";
}

@*<form asp-action="Create" asp-route-returnURL="@ViewBag.ReturnURL">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="CreatorId" />
    <input type="hidden" asp-for="CommentedItemId" />
    <div class="form-group">
        <label asp-for="Content" class="control-label"></label>
        <input asp-for="Content" class="form-control" />
        <span asp-validation-for="Content" class="text-danger"></span>
    </div>
    <div class="form-group">
        <input type="submit" value="Create" class="btn btn-default" />
    </div>
</form>*@




<br />
<div class="container ">
    <div class="row white  z-depth-2">
        <div class="col s6">
            <div class="card z-depth-0 no-border">
                <div class="card-image waves-effect waves-block waves-light">
                    <img class="activator" src="~/images/userimages/@Model.ImageComments.FirstOrDefault().CommentedItem.Src">
                </div>
                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4">Card Title<i class="material-icons right">more_vert</i></span>
                    CreateAsd(Guid imgId, string content)
                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">Add Comment<i class="material-icons right">close</i></span>
                        <form asp-controller="ImageComment" asp-action="CreateAsd" asp-route-returnURL="@ViewBag.ReturnURL">
                            <div class="input-field">
                                <label for="content" class="control-label"></label>
                                <input name="content" class="form-control" />
                                <input name="imgId" hidden value="@Model.ImageComments.FirstOrDefault().CommentedItemId" />
                            </div>
                            <div class="input-field">
                                <input type="submit" value="Add" class="btn btn-default" />
                            </div>
                        </form>
                </div>
            </div>
        </div>
        <div class="col s6">
            <div class="" style="position: relative; left: 10px;"><h3> Comments</h3></div>
            <ul class="collection">
                @foreach (var comment in Model.ImageComments.OrderBy(_ => _.CreatedDate))
                {
                    <li class="collection-item avatar col s12 row ">
                        <a asp-controller="User" asp-action="Profile" asp-route-id="@comment.Creator.Id"><img src="~/images/userimages/@comment.Creator.ProfileImageSrc" alt="" class="circle"></a>
                        <div class="col s8 title left-align left text-left"><b><a asp-controller="User" asp-action="Profile" asp-route-id="@comment.Creator.Id">@comment.Creator.FirstName @comment.Creator.LastName</a>: </b>@comment.Content</div>
                        @if (comment.Creator.UserName == User.Identity.Name)
                        {
                            <div class="valign-wrapper" style="height: 100%; position: absolute; top: 0px; right: 10px;">
                                <div class="inline text-right">
                                    <a class="btn rounded orange" asp-controller="ImageComment" asp-action="Edit" asp-route-id="@comment.Id"><i class="material-icons">edit</i></a>
                                    <a class="btn rounded red" asp-controller="ImageComment" asp-action="Delete" asp-route-id="@comment.Id"><i class="material-icons">delete_forever</i></a>
                                </div>
                            </div>

                        }
                    </li>
                }
            </ul>
        </div>

    </div>
</div>